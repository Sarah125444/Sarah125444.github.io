<!DOCTYPE HTML>
<html lang>
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Hexo">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->

    <meta name="keywords" content="正则表达式">


    <meta name="description" content="正则表达式的构建平衡法则构建正则有一点非常重要，需要做到下面几点的平衡。

匹配预期的字符串
不匹配非预期的字符串
可读性和维护性
效率

构建正则前提是否能使用正则正则很强大，以至于我们随便遇...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>正则表达式（五） | Hexo</title>


    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='John Doe'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 忙人的养猪综合指南 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">Hexo</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/前端/"><i class="fa "></i>笔记</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/后端/"><i class="fa "></i>日常</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/工具/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="正则表达式（五）">
            
	            正则表达式（五）
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/正则表达式/">正则表达式</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2019/08/02</span>
        </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <h2 id="正则表达式的构建"><a href="#正则表达式的构建" class="headerlink" title="正则表达式的构建"></a>正则表达式的构建</h2><h3 id="平衡法则"><a href="#平衡法则" class="headerlink" title="平衡法则"></a>平衡法则</h3><p>构建正则有一点非常重要，需要做到下面几点的平衡。</p>
<ul>
<li>匹配预期的字符串</li>
<li>不匹配非预期的字符串</li>
<li>可读性和维护性</li>
<li>效率</li>
</ul>
<h3 id="构建正则前提"><a href="#构建正则前提" class="headerlink" title="构建正则前提"></a>构建正则前提</h3><h4 id="是否能使用正则"><a href="#是否能使用正则" class="headerlink" title="是否能使用正则"></a>是否能使用正则</h4><p>正则很强大，以至于我们随便遇到一个操作字符串的问题时，都会下意识的去想，用正则该怎么做。<br>但是我们始终要提醒自己，正则虽然强大,但不是万能的，很多看似很简单的事情，还是做不到。<br>比如匹配这样的字符串：1010010001…<br>虽然很有规律，但是只靠正则是无能为力的。</p>
<h4 id="是否有必要使用正则"><a href="#是否有必要使用正则" class="headerlink" title="是否有必要使用正则"></a>是否有必要使用正则</h4><p>要认识到正则的局限，不要去研究根本无法完成的任务。<br>同时，也不能走入另外一个极端：无所不用正则。能用字符串API解决的问题，就不该正则出马。</p>
<h5 id="比如，从日期中提取出年月日，虽然可以使用正则："><a href="#比如，从日期中提取出年月日，虽然可以使用正则：" class="headerlink" title="比如，从日期中提取出年月日，虽然可以使用正则："></a>比如，从日期中提取出年月日，虽然可以使用正则：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;2017-07-01&quot;;</span><br><span class="line">var regex = /^(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/;</span><br><span class="line">console.log(string.match(regex)); </span><br><span class="line">// =&gt; [&quot;2017-07-01&quot;, &quot;2017&quot;, &quot;07&quot;, &quot;01&quot;, index: 0, input: &quot;2017-07-01&quot;]</span><br></pre></td></tr></table></figure>

<p>其实，可以使用字符串的split的方法来做，即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;2017-07-01&quot;;</span><br><span class="line">var result = string.split(&quot;-&quot;);</span><br><span class="line">console.log(result);  // [&quot;2017&quot;, &quot;07&quot;, &quot;01&quot;]</span><br></pre></td></tr></table></figure>

<h5 id="比如，判断是否有问号，虽然可以使用："><a href="#比如，判断是否有问号，虽然可以使用：" class="headerlink" title="比如，判断是否有问号，虽然可以使用："></a>比如，判断是否有问号，虽然可以使用：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;?id=xx&amp;act=search&quot;;</span><br><span class="line">console.log(string.search(/\?/));  //0</span><br></pre></td></tr></table></figure>

<p>其实可以使用字符串的indexOf方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;?id=xx&amp;act=search&quot;;</span><br><span class="line">console.log(string.indexOf(&quot;?&quot;)); // 0</span><br></pre></td></tr></table></figure>

<h5 id="比如获取字串，虽然可以使用正则："><a href="#比如获取字串，虽然可以使用正则：" class="headerlink" title="比如获取字串，虽然可以使用正则："></a>比如获取字串，虽然可以使用正则：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;JavaScript&quot;;</span><br><span class="line">console.log(string.match(/.&#123;4&#125;(.+)/)[1]);   //Script</span><br></pre></td></tr></table></figure>

<p>其实可以直接使用字符串的substring或substr方法来做：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;JavaScript&quot;;</span><br><span class="line">console.log(string.substring(4)); //Script</span><br></pre></td></tr></table></figure>

<h5 id="是否有必要构造一个复杂的正则"><a href="#是否有必要构造一个复杂的正则" class="headerlink" title="是否有必要构造一个复杂的正则"></a>是否有必要构造一个复杂的正则</h5><p>比如密码匹配问题，要求密码长度6-12位，由数字、小写字符和大写字符组成，但必须至少包括2种字符。<br>在第2章里，我们写出了正则是：<br>/(?!^[0-9]{6,12}$)(?!^[a-z]{6,12}$)(?!^[A-Z]{6,12}$)^[0-9A-Za-z]{6,12}$/<br>其实可以使用多个小正则来做：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var regex1 = /^[0-9a-zA-Z]&#123;6,12&#125;$/;</span><br><span class="line">var regex2 = /^[0-9]&#123;6,12&#125;$/;</span><br><span class="line">var regex3 = /^[A-Z]&#123;6,12&#125;$/;</span><br><span class="line">var regex4 = /^[a-z]&#123;6,12&#125;$/;</span><br><span class="line">function checkPassword(string)&#123;</span><br><span class="line">  if(!regex1.test(string))  return false;</span><br><span class="line">  if(!regex2.test(string))  return false;</span><br><span class="line">  if(!regex3.test(string))  return false;</span><br><span class="line">  if(!regex4.test(string))  return false;</span><br><span class="line">  return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="准确性"><a href="#准确性" class="headerlink" title="准确性"></a>准确性</h4><p>所谓准确性，就是能匹配预期的结果，并且不匹配非预期的目标。<br>这里提到了“预期”二字，那么我们就需要知道目标的组成规则。<br>不然没法界定什么样的目标字符串是符合预期的，什么样的又不是符合预期的。<br>下面举例说明，当目标字符串构成比较复杂时，该如何构建正则，并考虑到哪些平衡。</p>
<h5 id="匹配固定电话"><a href="#匹配固定电话" class="headerlink" title="匹配固定电话"></a>匹配固定电话</h5><p>比如要匹配如下格式的固定电话号码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">055188888888</span><br><span class="line"></span><br><span class="line">0551-88888888</span><br><span class="line"></span><br><span class="line">(0551)88888888</span><br></pre></td></tr></table></figure>

<p>第一步，了解各部分的模式规则。<br>上面的电话，总体上分为区号和号码两部分（不考虑分机号和+86的情形）。<br>区号是0开头的3到4位数字，对应的正则是：0\d{2,3}<br>号码是非0开头的3到4位数字，对应的正则是：[1-9]\d{6,7}<br>因此，匹配055188888888的正则是：/^0\d{2,3}[1-9]\d{6,7}$/<br>匹配0551-88888888的正则是：/^0\d{2,3}-[1-9]\d{6,7}$/<br>匹配(0551)88888888的正则是：/^(0\d{2,3})[1-9]\d{6,7}$/</p>
<p>第二步，明确形式关系。<br>这三者情形是或的关系，可以构建分支：<br>/^0\d{2,3}[1-9]\d{6,7}$|^0\d{2,3}-[1-9]\d{6,7}$|^(0\d{2,3})[1-9]\d{6-7}$/<br>提取公共部分：<br>/^(0\d{2,3}|0\d{2,3}-|(0\d{2,3}))[1-9]\d{6,7}$/<br>进一步简写：<br>/^(0\d{2,3}-?|\d{2,3}))[1-9]\d{6,7}$/</p>
<h5 id="匹配浮点数"><a href="#匹配浮点数" class="headerlink" title="匹配浮点数"></a>匹配浮点数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.23 +1.23 -123</span><br></pre></td></tr></table></figure>

<p>可以看出正则分为3部分。<br>符号部分：[+-]<br>整数部分：\d+<br>小数部分：.\d+;<br>上述三个部分，并不是全部意思。如果此时很容易写出如下的正则：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[+-]?(\d+)?(\.\d+)?$/</span><br></pre></td></tr></table></figure>

<p>此正则看似没问题，但是这个正则也会匹配空字符“”；<br>因为目标字符串的形式关系不是要求每部分都是可选的。<br>要匹配1.23 、+1.23 、-1.23,可以用/^[+-]?\d+.\d+$/<br>要匹配10、+10、-10，可以用/^[+-]?\d+$/<br>要匹配2、+2、-2，可以用/^[+-]?.\d+$/<br>因此整个正则是这三者的或的关系，提取公共部分后是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[+-]?(\d+\.\d+|\d+|\.\d+)$/</span><br></pre></td></tr></table></figure>

<h3 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h3><p>保证了准确性后，才需要考虑是否要优化。大多数情形是不需要优化的，除非运行的非常慢。什么情形正则运行才慢呢？我们需要考查正则表达式的运行过程(原理).<br>正则表达式的运行分为如下的阶段：</p>
<ul>
<li>编译</li>
<li>设定起始位置</li>
<li>尝试匹配</li>
<li>匹配失败的话，从下一位开始继续第三步</li>
<li>最终结果：匹配成功或失败</li>
</ul>
<p>下面以代码为例，来看看这个阶段都做了什么：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\d+/g;</span><br><span class="line">console.log(regex.lastIndex, regex.exec(&quot;123abcdef&quot;));</span><br><span class="line">// =&gt; 0 [&quot;123&quot;, index: 0, input: &quot;123abc34def&quot;]</span><br><span class="line">console.log(regex.lastIndex, regex.exec(&quot;123abc34def&quot;));</span><br><span class="line">// =&gt; 3 [&quot;34&quot;, index: 6, input: &quot;123abc34def&quot;]</span><br><span class="line">console.log(regex.lastIndex, regex.exec(&quot;123abc34def&quot;)); </span><br><span class="line">// =&gt; 8 null</span><br><span class="line">console.log(regex.lastIndex, regex.exec(&quot;123abc34def&quot;))</span><br><span class="line">// =&gt; 0 [&quot;123&quot;, index: 0, input: &quot;123abc34def&quot;]</span><br></pre></td></tr></table></figure>

<p>具体分析如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\d+/g;</span><br></pre></td></tr></table></figure>

<p>当生成一个正则时，引擎会对其进行编译。报错与否出现这个阶段。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regex.exec(&quot;123abc34def&quot;);</span><br></pre></td></tr></table></figure>

<p>当尝试匹配时，需要确定从哪一位置开始匹配，一般情形都是字符串的开头，即第0位。<br>但当使用test和exec方法，且正则有g时，起始位置是从正则对象的lastIndex属性开始的。<br>因此第一次exec是从第0位开始，而第二次是从3开始的。<br>设定好起始位置后，就开始尝试匹配了。<br>比如第一次exec,从0开始，去尝试匹配，并且成功的匹配到3个数字。此时结束时的下标是2，因此下一次的起始位置是3.<br>而第二次，起始下标是3，但是第3个字符是”a“,并不是数字。但此时并不会直接报匹配失败，而是移动到下一位置，即从第4位开始继续尝试匹配，但该字符是b,也不是数字。再移动到下一位，是c仍不行，再移动一位是数字3，此时匹配到了两位数字34，此时，下一次匹配的位置是d的位置，即第8位。<br>第三次，是从第8位开始匹配，直到试到最后一位，也没发现匹配的，因此匹配失败，返回null.同时设置lastIndex为0，即，如果再尝试匹配的话，需从头开始。<br>从上面可以看出，匹配会出现效率问题，主要出现在上面的第3阶段和第4阶段。<br>因此，主要优化手法也是针对这两阶段的。</p>
<h4 id="使用具体型字符来替代通配符，来消除回溯。"><a href="#使用具体型字符来替代通配符，来消除回溯。" class="headerlink" title="使用具体型字符来替代通配符，来消除回溯。"></a>使用具体型字符来替代通配符，来消除回溯。</h4><p>而在第三阶段，最大的问题是回溯。<br>例如，匹配双引号之间的字符。如，匹配字符串123“abc”456中的“abc”.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果正则用的是：/.*/  ,会在第3阶段产生4次回溯（粉色表示.*匹配的内容）</span><br></pre></td></tr></table></figure>

<p>因为回溯的存在，需要引擎保存多种可能中未尝试的状态，以便后续回溯时使用。注定要占用一定的内存。<br>此时要使用具体化的字符组，来替代通配符.,以便消除不必要的字符，此时使用正则/[^”]*”/即可。</p>
<h4 id="使用非捕获型分组"><a href="#使用非捕获型分组" class="headerlink" title="使用非捕获型分组"></a>使用非捕获型分组</h4><p>因为括号的作用之一是，可以获取分组和分支里的数组。那么就需要内存来保存他们。<br>当我们不需要使用分组引用和反向引用时，此时可以使用非捕获分组。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[+-]?(\d+\.\d+|\d+\.\d+)$/</span><br></pre></td></tr></table></figure>

<p>可以修改成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[+-]?(?:\d+\.\d+|\d+|\.\d)$/</span><br></pre></td></tr></table></figure>

<h4 id="独立出确定字符"><a href="#独立出确定字符" class="headerlink" title="独立出确定字符"></a>独立出确定字符</h4><p>例如/a+/,可以修改成/aa*/.<br>因为后者能比前者多确定了字符a.这样会在第四步中，加速判断是否匹配失败，进而加快移位的速度。</p>
<h4 id="提取公共分支公共部分"><a href="#提取公共分支公共部分" class="headerlink" title="提取公共分支公共部分"></a>提取公共分支公共部分</h4><p>比如/^abc|^def/,修改成/^(?:abc|def)/；<br>又比如/this|that/,修改成/th(?:is|at)/;<br>这样做，可以减少匹配过程中可消除的重复。</p>
<h4 id="减少分支的数量，缩小他们的范围"><a href="#减少分支的数量，缩小他们的范围" class="headerlink" title="减少分支的数量，缩小他们的范围"></a>减少分支的数量，缩小他们的范围</h4><p>/red|read/,可以修改成/rea?d/。此时分支和量词产生的回溯的成本是不一样的。但这样优化后，可读性会降低的。</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>一般情况下，针对某问题能写出一个满足需求的正则，基本上就可以了。<br>至于准确性和效率方面的追求，纯属看个人要求。我觉得够用就行了。<br>关于准确性，本章关心的是最常用的解决思路；<br>针对每种情形，分别写出正则，然后用分支把他们合并在一起，再提取公共部分，就能得到准确的正则。</p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">Snippet</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2019/08/02/正则表达式6/" class="pre-post btn btn-default" title='正则表达式（六）'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">正则表达式（六）</span>
        </a>
    
    
        <a href="/2019/07/31/正则表达式4/" class="next-post btn btn-default" title='正则表达式（四）'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">正则表达式（四）</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'xOKV9J4UeQAtVkvnJC7Kq2Jn-gzGzoHsz',
            appKey: 'erIpQac4azoCmgfBB7Dl9maa',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: ''.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">Table of Contents</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式的构建"><span class="toc-text">正则表达式的构建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#平衡法则"><span class="toc-text">平衡法则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构建正则前提"><span class="toc-text">构建正则前提</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#是否能使用正则"><span class="toc-text">是否能使用正则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#是否有必要使用正则"><span class="toc-text">是否有必要使用正则</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#比如，从日期中提取出年月日，虽然可以使用正则："><span class="toc-text">比如，从日期中提取出年月日，虽然可以使用正则：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#比如，判断是否有问号，虽然可以使用："><span class="toc-text">比如，判断是否有问号，虽然可以使用：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#比如获取字串，虽然可以使用正则："><span class="toc-text">比如获取字串，虽然可以使用正则：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#是否有必要构造一个复杂的正则"><span class="toc-text">是否有必要构造一个复杂的正则</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#准确性"><span class="toc-text">准确性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#匹配固定电话"><span class="toc-text">匹配固定电话</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#匹配浮点数"><span class="toc-text">匹配浮点数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#效率"><span class="toc-text">效率</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用具体型字符来替代通配符，来消除回溯。"><span class="toc-text">使用具体型字符来替代通配符，来消除回溯。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用非捕获型分组"><span class="toc-text">使用非捕获型分组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#独立出确定字符"><span class="toc-text">独立出确定字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#提取公共分支公共部分"><span class="toc-text">提取公共分支公共部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#减少分支的数量，缩小他们的范围"><span class="toc-text">减少分支的数量，缩小他们的范围</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-text">小结</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2017
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>
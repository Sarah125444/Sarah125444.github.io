<!DOCTYPE HTML>
<html lang>
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="Hexo">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->

    <meta name="keywords" content="正则表达式">


    <meta name="description" content="正则表达式编程正则表达式的四种操作正则表达式是匹配模式，不管如何使用正则表达式，万变不离其宗，都需要先”匹配”。有了匹配这一模式后，才有其他的操作：验证、切分、提取、替换。进行任何相关操作，也需...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>正则表达式（六） | Hexo</title>


    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='John Doe'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 忙人的养猪综合指南 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">Hexo</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/前端/"><i class="fa "></i>笔记</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/后端/"><i class="fa "></i>日常</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/工具/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="正则表达式（六）">
            
	            正则表达式（六）
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/正则表达式/">正则表达式</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2019/08/02</span>
        </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <h2 id="正则表达式编程"><a href="#正则表达式编程" class="headerlink" title="正则表达式编程"></a>正则表达式编程</h2><h3 id="正则表达式的四种操作"><a href="#正则表达式的四种操作" class="headerlink" title="正则表达式的四种操作"></a>正则表达式的四种操作</h3><p>正则表达式是匹配模式，不管如何使用正则表达式，万变不离其宗，都需要先”匹配”。<br>有了匹配这一模式后，才有其他的操作：验证、切分、提取、替换。<br>进行任何相关操作，也需要宿主引擎相关API的配合使用。当然，在JS中，相关API也不对。</p>
<h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p>验证是正则表达式最直接的应用，比如表单验证。<br>在说验证之前，先要说清楚匹配是什么概念。<br>所谓匹配，就是看目标字符串是否有满足匹配的字串。因此，“匹配“的本质就是”查找“。<br>有没有匹配，是不是匹配上，判断是否的操作，即称为”验证“。<br>这里举一个例子，来看看如何使用相关API进行验证操作的。<br>比如，判断一个字符串中是否有数字。</p>
<ul>
<li>使用search</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\d/;</span><br><span class="line">var string = &quot;abc123&quot;;</span><br><span class="line">console.log(!!~string.search(regex)); //true</span><br></pre></td></tr></table></figure>

<ul>
<li>使用test</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\d/;</span><br><span class="line">var string = &quot;abc123&quot;;</span><br><span class="line">console.log(regex.test(string)); //true</span><br></pre></td></tr></table></figure>

<ul>
<li>使用match</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\d/;</span><br><span class="line">var string = &quot;abc123&quot;;</span><br><span class="line">console.log(!!string.match(regex)); //true</span><br></pre></td></tr></table></figure>

<ul>
<li>使用exec</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\d/;</span><br><span class="line">var string = &quot;abc123&quot;;</span><br><span class="line">console.log(!!regex.exec(string)); //true</span><br></pre></td></tr></table></figure>

<p>其中最常用的是test.</p>
<h4 id="切分"><a href="#切分" class="headerlink" title="切分"></a>切分</h4><p>匹配上了，我们就可以进行一些操作，比如切分。<br>所谓“切分”，就是把目标字符串，切成一段一段的。<br>在JS中使用的是split.<br>比如，目标字符串是”html,css,javascript”,按照逗号来切分：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var regex = /,/;</span><br><span class="line">var string = &quot;html,css,javascript&quot;;</span><br><span class="line">console.log(string.split(regex));</span><br><span class="line">// =&gt; [&quot;html&quot;, &quot;css&quot;, &quot;javascript&quot;]</span><br></pre></td></tr></table></figure>

<p>又比如，如下的日期格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2017/06/26</span><br><span class="line">2017.06.26</span><br><span class="line">2017-06-26</span><br></pre></td></tr></table></figure>

<p>可以使用split“切出”年月日：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\D/;</span><br><span class="line">console.log(&quot;2017/06/26&quot;.split(regex)); // =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]</span><br><span class="line">console.log(&quot;2017.06.26&quot;.split(regex)); // =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]</span><br><span class="line">console.log(&quot;2017-06-26&quot;.split(regex)); // =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]</span><br></pre></td></tr></table></figure>

<h4 id="提取"><a href="#提取" class="headerlink" title="提取"></a>提取</h4><p>虽然整体匹配上了，但有时需要提取部分匹配的数据。<br>此时正则通常要使用分组应用（分组捕获）功能，还需要配合使用相关API.<br>这里，还是以日期为例，提取出年月日。注意下面正则中的括号。</p>
<ul>
<li>match</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var regex = /^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/;</span><br><span class="line">var string = &quot;2017-06-26&quot;;</span><br><span class="line">console.log(string.match(regex));</span><br><span class="line">// =&gt;[&quot;2017-06-26&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;26&quot;, index: 0, input: &quot;2017-06-26&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>exec</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var regex = /^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/;</span><br><span class="line">var string = &quot;2017-06-26&quot;;</span><br><span class="line">console.log(regex.exec(string)); </span><br><span class="line">// =&gt;[&quot;2017-06-26&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;26&quot;, index: 0, input: &quot;2017-06-26&quot;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>test</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var regex = /^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/;</span><br><span class="line">var string = &quot;2017-06-26&quot;;</span><br><span class="line">regex.test(string);</span><br><span class="line">console.log(RegExp.$1, RegExp.$2, RegExp.$2);</span><br><span class="line">// =&gt; &quot;2017&quot; &quot;06&quot; &quot;26&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>search</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var regex = /^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/;</span><br><span class="line">var string = &quot;2017-06-26&quot;;</span><br><span class="line">string.search(regex);</span><br><span class="line">console.log( RegExp.$1, RegExp.$2, RegExp.$3 );</span><br><span class="line">// =&gt; &quot;2017&quot; &quot;06&quot; &quot;26&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>replace<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var regex = /^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/;</span><br><span class="line">var string = &quot;2017-06-26&quot;;</span><br><span class="line">var data = [];</span><br><span class="line">string.replace(regex,function(match, year, month , day)&#123;</span><br><span class="line">  data.push(year , month , day);</span><br><span class="line">&#125;);</span><br><span class="line">console.log(data); //[&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>其中，最常用的是match</p>
<h5 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h5><p>找，往往不是目的，通常下一步是为了替换。在JS中，使用replace进行替换。<br>比如把日期格式，从yyyy-mm-dd替换成yyyy/mm/dd：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;2017-06-26&quot;;</span><br><span class="line">var today = new Date(string.replace(/-/g, &quot;/&quot;));</span><br><span class="line">console.log(today); </span><br><span class="line">//Mon Jun 26 2017 00:00:00 GMT+0800 (中国标准时间)</span><br></pre></td></tr></table></figure>

<h4 id="相关API注意要点"><a href="#相关API注意要点" class="headerlink" title="相关API注意要点"></a>相关API注意要点</h4><p>从上面可以看出用于正则操作的方法，共有6个，字符串实例4个，正则实例2个。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String#search</span><br><span class="line">String#split</span><br><span class="line">String#match</span><br><span class="line">String#replace</span><br><span class="line">RegExp#test</span><br><span class="line">RegExp#exec</span><br></pre></td></tr></table></figure>

<h5 id="search和match的参数问题"><a href="#search和match的参数问题" class="headerlink" title="search和match的参数问题"></a>search和match的参数问题</h5><p>我们知道字符串实例的那4个方法参数都支持正则和字符串。<br>但是search和match，会把字符串转换成正则。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;2017.06.27&quot;;</span><br><span class="line">console.log(string.search(&quot;.&quot;)); //0</span><br><span class="line"></span><br><span class="line">console.log(string.search(&quot;\\.&quot;)) //4</span><br><span class="line">console.log(string.search(/\./)); //4</span><br><span class="line"></span><br><span class="line">console.log(string.match(&quot;.&quot;)); //[&quot;2&quot;, index: 0, input: &quot;2017.06.27&quot;, groups: undefined]</span><br><span class="line">console.log(string.match(&quot;\\.&quot;)); //[&quot;.&quot;, index: 4, input: &quot;2017.06.27&quot;, groups: undefined]</span><br><span class="line">console.log(string.match(/\./)); //[&quot;.&quot;, index: 4, input: &quot;2017.06.27&quot;, groups: undefined]</span><br><span class="line"></span><br><span class="line">console.log(string.split(&quot;.&quot;)); // [&quot;2017&quot;, &quot;06&quot;, &quot;27&quot;]</span><br><span class="line">console.log(string.replace(&quot;.&quot; , &quot;/&quot;)); //2017/06.27</span><br></pre></td></tr></table></figure>

<h5 id="match返回结果的格式问题"><a href="#match返回结果的格式问题" class="headerlink" title="match返回结果的格式问题"></a>match返回结果的格式问题</h5><p>match返回结果的格式，与正则对象是否有修饰符g有关。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;2017.06.27&quot;;</span><br><span class="line">var regex1 = /\b(\d+)\b/;</span><br><span class="line">var regex2 = /\b(\d+)\b/g;</span><br><span class="line">console.log(string.match(regex1)); //[&quot;2017&quot;, &quot;2017&quot;, index: 0, input: &quot;2017.06.27&quot;, groups: undefined]</span><br><span class="line">console.log(string.match(regex2));//[&quot;2017&quot;, &quot;06&quot;, &quot;27&quot;]</span><br></pre></td></tr></table></figure>

<p>没有g,返回的是标准格式，即，数组的第一个元素是整体匹配的内容，接下俩是分组捕获的内容，然后是整体匹配的一个小标，最后是输入的目标字符串。<br>有g,返回的是所有匹配的内容。<br>当没有匹配时，不管有无g,都返回null.</p>
<h5 id="exec比match更强大"><a href="#exec比match更强大" class="headerlink" title="exec比match更强大"></a>exec比match更强大</h5><p>当正则没有g时，使用match返回的信息比较多。但是有g后，就没有关键的信息index了。<br>而exec方法就能解决这个问题，它能接着上一次匹配后继续匹配：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;2017.06.27&quot;;</span><br><span class="line">var regex2 = /\b(\d+)\b/g;</span><br><span class="line">console.log(regex2.exec(string)); // [&quot;2017&quot;, &quot;2017&quot;, index: 0, input: &quot;2017.06.27&quot;, groups: undefined]</span><br><span class="line">console.log(regex2.lastIndex); //4</span><br><span class="line">console.log(regex2.exec(string)); //[&quot;06&quot;, &quot;06&quot;, index: 5, input: &quot;2017.06.27&quot;, groups: undefined]</span><br><span class="line">console.log(regex2.lastIndex); //7</span><br><span class="line">console.log(regex2.exec(string)); //[&quot;27&quot;, &quot;27&quot;, index: 8, input: &quot;2017.06.27&quot;, groups: undefined]</span><br><span class="line">console.log(regex2.lastIndex); //10</span><br></pre></td></tr></table></figure>

<p>其中正则实例lastIndex属性，表示下一次匹配开始的位置。<br>比如第一次匹配了”2017”,开始下标是0,共4个字符，因此这次匹配结束的位置是3，下一次开始匹配的位置是4。<br>从上述代码看出，在使用exec时，经常需要配合使用while循环;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> var string = &quot;2017.06.27&quot;;</span><br><span class="line"> var regex2 = /\b(\d+)\b/g;</span><br><span class="line"> var result;</span><br><span class="line"> while(result = regex2.exec(string))&#123;</span><br><span class="line">  console.log(result , regex2.lastIndex);</span><br><span class="line"> &#125;</span><br><span class="line">//[&quot;2017&quot;, &quot;2017&quot;, index: 0, input: &quot;2017.06.27&quot;, groups: undefined] 4</span><br><span class="line">//[&quot;06&quot;, &quot;06&quot;, index: 5, input: &quot;2017.06.27&quot;, groups: undefined] 7</span><br><span class="line">//[&quot;27&quot;, &quot;27&quot;, index: 8, input: &quot;2017.06.27&quot;, groups: undefined] 10</span><br></pre></td></tr></table></figure>

<h5 id="修饰符g-对exec和test的影响"><a href="#修饰符g-对exec和test的影响" class="headerlink" title="修饰符g,对exec和test的影响"></a>修饰符g,对exec和test的影响</h5><p>上面提到了正则示例的lastIndex的属性，表示尝试匹配时，从字符串的lastIndex位开始去匹配。<br>字符串的四个方法，每次匹配时，都是从0开始的，即lastIndex属性始终不变。<br>而正则示例的两个方法exec,test，当正则是全局匹配时，每一次匹配完成后，都会修改lastIndex。下面我们以test为例，看看你是否会迷糊：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var regex = /a/g;</span><br><span class="line">console.log(regex.test(&quot;a&quot;) , regex.lastIndex); //true 1</span><br><span class="line">console.log(regex.test(&quot;aba&quot;), regex.lastIndex); //true 3</span><br><span class="line">console.log(regex.test(&quot;ababc&quot;) , regex.lastIndex); //false 0</span><br></pre></td></tr></table></figure>

<p>注意上面代码中的第三次调用test,因为这一次尝试匹配，开始从下标lastIndex即3位置处开始查找，自然就找不到了。<br>如果没有g,自然都是从字符串第0个字符处开始尝试匹配：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var regex = /a/;</span><br><span class="line">console.log(regex.test(&quot;a&quot;) , regex.lastIndex); //true 0</span><br><span class="line">console.log(regex.test(&quot;aba&quot;) , regex.lastIndex); //true 0</span><br><span class="line">console.log(regex.test(&quot;ababc&quot;) , regex.lastIndex); //true 0</span><br></pre></td></tr></table></figure>

<h5 id="test整体匹配时需要使用-和"><a href="#test整体匹配时需要使用-和" class="headerlink" title="test整体匹配时需要使用^和$"></a>test整体匹配时需要使用^和$</h5><p>这个相对容易理解，因为test是看目标字符串中是否有字串匹配正则，即有部分匹配即可。<br>如果，要整体匹配，正则前后需要添加开头和结尾。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(/123/.test(&quot;a123b&quot;)); //true</span><br><span class="line">console.log(/^123$/.test(&quot;a123b&quot;));  //false</span><br><span class="line">console.log(/^123$/.test(&quot;123&quot;)); //true</span><br></pre></td></tr></table></figure>

<h5 id="split相关注意事项"><a href="#split相关注意事项" class="headerlink" title="split相关注意事项"></a>split相关注意事项</h5><p>split方法看起来不顺眼，但要注意的地方有两个。<br>第一，它可以有第二个参数，表示结果数组的最大长度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;html,css,javascript&quot;;</span><br><span class="line">console.log(string.split( /,/, 2 )); //[&quot;html&quot;, &quot;css&quot;]</span><br></pre></td></tr></table></figure>

<p>第二，正则使用分组时，结果数组中是包含分割符的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;html,css,javascript&quot;;</span><br><span class="line">console.log(string.split(/(,)/)); //[&quot;html&quot;, &quot;,&quot;, &quot;css&quot;, &quot;,&quot;, &quot;javascript&quot;]</span><br></pre></td></tr></table></figure>

<h5 id="replace是很强大的"><a href="#replace是很强大的" class="headerlink" title="replace是很强大的"></a>replace是很强大的</h5><p>replace有两种使用形式，这是因为它的第二个参数，可以是字符串，可以是函数。<br>当第二个参数是字符串时，如下的字符有特殊的含义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$1,$2,$3,...,$99匹配第1-99个分组里捕获的文本</span><br><span class="line">$&amp;匹配到的字串文本</span><br><span class="line">$&apos;匹配到的字串的左边文本</span><br><span class="line">$&apos;匹配到的子串的右边文本</span><br><span class="line">$$美元符号</span><br></pre></td></tr></table></figure>

<p>例如，把”2,3,5”,变成”5=2+3”:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var result=&quot;2,3,5&quot;.replace(/(\d+),(\d+),(\d+)/, &quot;$3=$1+$2&quot;);</span><br><span class="line">console.log(result);  //5=2+3</span><br></pre></td></tr></table></figure>

<p>又例如，把”2,3,5”,变成”222,333,555”:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var result = &quot;2,3,5&quot;.replace(/(\d+)/g, &quot;$&amp;$&amp;$&amp;&quot; );</span><br><span class="line">console.log(result);  //222,333,555</span><br></pre></td></tr></table></figure>

<p>当第二个参数是函数时，我们需要注意该回调函数的参数具体是什么：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;1234 2345 3456&quot;.replace( /(\d)\d&#123;2&#125;(\d)/g , function(match, $1, $2 ,index, input)&#123;</span><br><span class="line">  console.log([match, $1, $2, index , input]);</span><br><span class="line">&#125;);  </span><br><span class="line">//[&quot;1234&quot;, &quot;1&quot;, &quot;4&quot;, 0, &quot;1234 2345 3456&quot;]</span><br><span class="line">//[&quot;2345&quot;, &quot;2&quot;, &quot;5&quot;, 5, &quot;1234 2345 3456&quot;]</span><br><span class="line">// [&quot;3456&quot;, &quot;3&quot;, &quot;6&quot;, 10, &quot;1234 2345 3456&quot;]</span><br></pre></td></tr></table></figure>

<p>此时我们可以看到replace拿到的信息，并不比exec少。</p>
<h5 id="使用构造函数需要注意的问题"><a href="#使用构造函数需要注意的问题" class="headerlink" title="使用构造函数需要注意的问题"></a>使用构造函数需要注意的问题</h5><p>一般不推荐使用构造函数生成正则，而应该优先使用字面量。因为用构造函数会写很多\。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;2017-06-27 2007.06.27 2017/06/27&quot;;</span><br><span class="line">var regex = /\d&#123;4&#125;(-|\.|\/)\d&#123;2&#125;\1\d&#123;2&#125;/g;</span><br><span class="line">console.log(string.match(regex)); </span><br><span class="line">// [&quot;2017-06-27&quot;, &quot;2007.06.27&quot;, &quot;2017/06/27&quot;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var string = &quot;2017-06-27 2007.06.27 2017/06/27&quot;;</span><br><span class="line">regex = new RegExp(&quot;\\d&#123;4&#125;(-|\\.|\\/)\\d&#123;2&#125;\\1\\d&#123;2&#125;&quot; , &quot;g&quot;);</span><br><span class="line">console.log(string.match(regex));</span><br><span class="line">//[&quot;2017-06-27&quot;, &quot;2007.06.27&quot;, &quot;2017/06/27&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><p>ES5中修饰符，共3个：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g 全局匹配，即找到所有匹配的，单词是global</span><br><span class="line">i 忽略字母大小写，单词ingoreCase</span><br><span class="line">m 多行匹配，只影响^和$,二者变成行的概念，即行开头和行结尾。单词是multiline.</span><br></pre></td></tr></table></figure>

<p>当然正则对象也有相应的只读属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var regex = /\w/img;</span><br><span class="line">console.log(regex.global); //true</span><br><span class="line">console.log(regex.ignoreCase); //true</span><br><span class="line">console.log(regex.multiline); //true</span><br></pre></td></tr></table></figure>

<h4 id="source属性"><a href="#source属性" class="headerlink" title="source属性"></a>source属性</h4><p>正则实例对象属性，除了global，ingnoreCase，nultiline,lastIndex属性之外，还有一个source属性。<br>它什么时候有用呢？<br>比如，在构建动态的正则表达式时，可以通过查看该属性，来确认构建出的正则到底是什么？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var className = &quot;high&quot;;</span><br><span class="line">var regex = new RegExp(&quot;(^|\\s)&quot; + className + &quot;(\\s|$)&quot;);</span><br><span class="line">console.log(regex.source); //(^|\s)high(\s|$)</span><br></pre></td></tr></table></figure>

<h5 id="构造函数属性"><a href="#构造函数属性" class="headerlink" title="构造函数属性"></a>构造函数属性</h5><p>构造函数的静态属性基于所执行的最后一次正则操作而变化。除了是$1,…,$9之外，还有几个不太常用的属性（有兼容性问题）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RegExp.input最近一次目标字符串，简写成RegExp[&quot;$_&quot;]</span><br><span class="line">RegExp.lastMatch 最近一次匹配的文本，简写成RegExp[&quot;$&amp;&quot;]</span><br><span class="line">RegExp.lastParen 最近一次捕获的文本，简写成RegExp[&quot;$+&quot;]</span><br><span class="line">RegExp.leftContext 目标字符串中lastMatch之前的文本，简写成RegExp[&quot;$&apos;&quot;]</span><br><span class="line">RegExp.rightContext 目标字符串中lastMatch之后的文本，简写成RegExp[&quot;$&apos;&quot;]</span><br></pre></td></tr></table></figure>

<p>测试代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">var regex = /([abc])(\d)/g;</span><br><span class="line">var string = &quot;a1b2c3d4e5&quot;;</span><br><span class="line">string.match(regex); </span><br><span class="line">console.log(RegExp.input); //a1b2c3d4e5</span><br><span class="line">console.log(RegExp[&quot;$_&quot;]);//a1b2c3d4e5</span><br><span class="line"></span><br><span class="line">var regex = /([abc])(\d)/g;</span><br><span class="line">var string = &quot;a1b2c3d4e5&quot;;</span><br><span class="line">string.match(regex);</span><br><span class="line">console.log(RegExp.lastMatch); //c3</span><br><span class="line">console.log(RegExp[&quot;$&amp;&quot;]); //c3</span><br><span class="line"></span><br><span class="line">var regex = /([abc])(\d)/g;</span><br><span class="line">var string = &quot;a1b2c3d4e5&quot;;</span><br><span class="line">string.match(regex);</span><br><span class="line">console.log(RegExp.lastParen); //3</span><br><span class="line">console.log(RegExp[&quot;$+&quot;]); //3</span><br><span class="line"></span><br><span class="line">var regex = /([abc])(\d)/g;</span><br><span class="line">var string = &quot;a1b2c3d4e5&quot;;</span><br><span class="line">string.match(regex);</span><br><span class="line">console.log(RegExp.leftContext);  //a1b2</span><br><span class="line">console.log(RegExp[&quot;$`&quot;]); //a1b2</span><br><span class="line"></span><br><span class="line">var regex = /([abc])(\d)/g;</span><br><span class="line">var string = &quot;a1b2c3d4e5&quot;;</span><br><span class="line">string.match(regex);</span><br><span class="line">console.log(RegExp.rightContext ); //d4e5</span><br><span class="line">console.log(RegExp[&quot;$&apos;&quot;]); //d4e5</span><br></pre></td></tr></table></figure>


    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">Snippet</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2019/08/02/DOM1/" class="pre-post btn btn-default" title='DOM的概念及作用'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">DOM的概念及作用</span>
        </a>
    
    
        <a href="/2019/08/02/正则表达式5/" class="next-post btn btn-default" title='正则表达式（五）'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">正则表达式（五）</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'xOKV9J4UeQAtVkvnJC7Kq2Jn-gzGzoHsz',
            appKey: 'erIpQac4azoCmgfBB7Dl9maa',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: ''.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">Table of Contents</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式编程"><span class="toc-text">正则表达式编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#正则表达式的四种操作"><span class="toc-text">正则表达式的四种操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#验证"><span class="toc-text">验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#切分"><span class="toc-text">切分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#提取"><span class="toc-text">提取</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#替换"><span class="toc-text">替换</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#相关API注意要点"><span class="toc-text">相关API注意要点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#search和match的参数问题"><span class="toc-text">search和match的参数问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#match返回结果的格式问题"><span class="toc-text">match返回结果的格式问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#exec比match更强大"><span class="toc-text">exec比match更强大</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#修饰符g-对exec和test的影响"><span class="toc-text">修饰符g,对exec和test的影响</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#test整体匹配时需要使用-和"><span class="toc-text">test整体匹配时需要使用^和$</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#split相关注意事项"><span class="toc-text">split相关注意事项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#replace是很强大的"><span class="toc-text">replace是很强大的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#使用构造函数需要注意的问题"><span class="toc-text">使用构造函数需要注意的问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修饰符"><span class="toc-text">修饰符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#source属性"><span class="toc-text">source属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#构造函数属性"><span class="toc-text">构造函数属性</span></a></li></ol></li></ol></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2017
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>